if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("LSApplyNewGroupThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.ftr(b.db.table(9).fetch(),function(c){return b.i64.eq(c.threadKey,a[1])||c.otidOfFirstMessage===a[0]}).next().then(function(c,e){e=c.done;c=c.value;return e?b.seq([function(c){return b.fe(b.ftr(b.db.table(9).fetch([[[a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.lt(c.authorityLevel,[0,80])}),function(a){return a["delete"]()})},function(c){return b.db.table(9).add({threadKey:a[1],mailboxType:[0,0],threadType:a[2],folderName:a[3],parentThreadKey:a[4],threadPictureUrlFallback:a[5],lastActivityTimestampMs:a[6],lastReadWatermarkTimestampMs:a[6],ongoingCallState:[0,0],nullstateDescriptionText1:a[8],nullstateDescriptionType1:a[9],nullstateDescriptionText2:a[10],nullstateDescriptionType2:a[11],cannotUnsendReason:a[12],capabilities:a[13],capabilities2:[0,0],capabilities3:[0,0],otidOfFirstMessage:a[0],authorityLevel:[0,80],unsendLimitMs:[-1,4294967295],inviterId:a[14]})}]):(c.item,b.fe(b.ftr(b.db.table(9).fetch(),function(c){return b.i64.eq(c.threadKey,a[1])||c.otidOfFirstMessage===a[0]}),function(b){var c=b.update;b.item;return c({threadKey:a[1],folderName:a[3],parentThreadKey:a[4],threadPictureUrlFallback:a[5],lastActivityTimestampMs:a[6],lastReadWatermarkTimestampMs:a[6],ongoingCallState:[0,0],nullstateDescriptionText1:a[8],nullstateDescriptionType1:a[9],nullstateDescriptionText2:a[10],nullstateDescriptionType2:a[11],cannotUnsendReason:a[12],capabilities:a[13],capabilities2:[0,0],capabilities3:[0,0],authorityLevel:[0,80],unsendLimitMs:[-1,4294967295],cannotReplyReason:d})}))})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSOverwriteAllThreadParticipantsAdminStatus",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(14).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({isAdmin:a[1]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSRemoveAllParticipantsForThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(14).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSSyncUpdateThreadName",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.fe(b.ftr(b.db.table(9).fetch([[[a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&(b.i64.eq(c.threadType,[0,2])||[[0,23],[0,21],[0,18]].some(function(a){return b.i64.eq(c.threadType,a)}))}),function(b){var c=b.update;b.item;return c({threadName:a[0]===""?d:a[0].trim()})})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSUpdateThreadParticipantAdminStatus",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(14).fetch([[[a[0],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq([0,0],[0,0])&&b.i64.eq(c.contactId,a[1])}),function(b){var c=b.update;b.item;return c({isAdmin:a[2]})})},function(a){return b.resolve(c)}])}e.exports=a}),null);